#include "bkAssets.h"

const bkProgSrc bkProgSrcCel = { "//Cel Vertex Shader\n\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif \n\nattribute vec4 a_position;\nattribute float a_index;\n\nuniform mat4 u_model[2];\nuniform mat4 u_projview;\n\nvoid main(void) {\n	gl_Position = u_projview * u_model[int( a_index )] * a_position;\n}\n", "//Cel Fragment Shader\n\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvoid main(void) {\n	gl_FragColor = vec4 ( 0.0, 0.0, 0.0, 1.0 );\n}\n\n" };
const bkProgSrc bkProgSrcDepth = { "//Depth Fragment Shader\n\nattribute lowp vec4 a_position;\nattribute lowp float a_index;\n\nuniform lowp mat4 u_model[2];\nuniform lowp mat4 u_projview;\n\nvarying lowp vec4 v_position;\n\nvoid main(void) {\n	gl_Position = v_position = u_projview * u_model[int(a_index)] * a_position;\n}\n", "//Depth Fragment Shader\n\nvarying lowp vec4 v_position;\n\nvec4 EncodeFloatRGBA( float v ) {\n  vec4 enc = vec4 (1.0, 255.0, 65025.0, 160581375.0) * v;\n  enc = fract(enc);\n  enc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\n  return enc;\n}\n\nvoid main (void) {\n	float depth = v_position.z / v_position.w;\n	gl_FragColor  = EncodeFloatRGBA( depth );\n}\n" };
const bkProgSrc bkProgSrcDepthExt = { "//Depth Ext Fragment Shader\n\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif \n\nattribute vec4 a_position;\nattribute float a_index;\n\nuniform mat4 u_model[2];\nuniform mat4 u_projview;\n\nvoid main(void) {\n	gl_Position = u_projview * u_model[int(a_index)] * a_position;\n}\n", "//Depth Ext Fragment Shader\n\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif \n\nvoid main (void) {\n	\n}\n" };
const bkProgSrc bkProgSrcDiffuse = { "//Diffuse Vertex Shader\n\nattribute lowp vec4 a_position;\nattribute lowp vec4 a_normal;\nattribute lowp float a_index;\n\nuniform lowp mat4 u_model[2];\nuniform lowp vec4 u_color[2];\nuniform lowp mat4 u_projview;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_dispersion;\nuniform lowp mat4 u_lightprojview;\n\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_position;\n\nvoid main(void) {\n	lowp int index = int( a_index );\n	lowp vec4 modelpos = u_model[index] * a_position;\n	lowp vec3 lightvec = u_lightpos - modelpos.xyz;\n	lowp float square = dot( lightvec, lightvec );\n	lowp float diffuse = max( dot( ( u_model[index] * a_normal ).xyz, lightvec / sqrt( square ) ), 0.1 ) / ( 1.0 + ( u_dispersion * square ) ); \n	v_color = vec4 ( u_color[index].rgb * diffuse, u_color[index].a );\n	v_position = u_lightprojview * modelpos;\n	gl_Position = u_projview * modelpos;\n}\n", "//Diffuse Fragment Shader\n\nuniform sampler2D u_depthmap;\n\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_position;\n\nfloat DecodeFloatRGBA( vec4 rgba ) {\n  return dot( rgba, vec4 ( 1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0 ) );\n}\n\nvoid main(void) {\n	vec3 proj = v_position.xyz / v_position.w;\n	float sampledepth = DecodeFloatRGBA ( texture2D( u_depthmap, proj.xy * 0.5 + 0.5 ) );\n	float fallof = 1.0 - length(proj.xy);\n	float shadow = sampledepth < proj.z ? 0.0 : 1.0;\n	gl_FragColor = vec4( vec3(sampledepth), 1.0);\n}\n" };
const bkProgSrc bkProgSrcDiffuseExt = { "//Diffuse Ext Vertex Shader\n\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif \n\nattribute vec4 a_position;\nattribute vec4 a_normal;\nattribute float a_index;\n\nuniform mat4 u_model[2];\nuniform vec4 u_color[2];\nuniform mat4 u_projview;\nuniform vec3 u_lightpos;\nuniform float u_dispersion;\nuniform mat4 u_lightbiasprojview;\n\nvarying vec4 v_color;\nvarying vec4 v_position;\n\nvoid main(void) {\n	int index = int( a_index );\n	vec4 modelpos = u_model[index] * a_position;\n	vec3 lightvec = u_lightpos - modelpos.xyz;\n	float square = dot( lightvec, lightvec );\n	float diffuse = max( dot( ( u_model[index] * a_normal ).xyz, lightvec / sqrt( square ) ), 0.1 ) / ( 1.0 + ( u_dispersion * square ) ); \n	v_color = vec4 ( u_color[index].rgb * diffuse, u_color[index].a );\n	v_position = u_lightbiasprojview * modelpos;\n	gl_Position = u_projview * modelpos;\n}\n", "//Diffuse Ext Fragment Shader\n\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif \n\nuniform highp sampler2D u_depthmap;\n\nvarying vec4 v_color;\nvarying vec4 v_position;\n\nconst float bias = 0.0005;\n\nvoid main(void) {\n	float hshad = 1.0 -float ( texture2DProj ( u_depthmap, v_position.xyw ).z < ( v_position.z - bias ) / v_position.w );\n	vec2 rad = v_position.xy - 0.5;\n	float fallof = 1.0 - dot ( rad, rad ) * 2.0;\n	gl_FragColor = vec4( vec3(fallof * hshad * v_color.r), 1.0);\n}\n\n" };
